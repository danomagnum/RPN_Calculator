#:kivy 1.2.0

<CalcButton@Button>:
	on_press: self.parent.parent.parent.parent.parent._execute(self.text)
	background_color: [1, 1, 1, 1]
	color: [1, 1, 1, 1]
	#font_size: self.width/2
	size_hint: 0.2, 0.1

<CalcButtonOp@CalcButton>:
	background_color: [0.6, 0.6, 0.6, 1]
	color: [0.2, 0.8, 1, 1]

<CalcButtonSpecial@CalcButton>:
	background_color: [0.3, 0.6, 0.6, 1]
	color: [0, 1, 1, 1]
			

<ButtonPage@StackLayout>:
	pos_hint: {'top': 0.9}
	orientation: "lr-tb"
	my_root: self.my_root

<VertiLabel@Label>:
	canvas.before:
		PushMatrix
		Rotate:
			angle: 90
			origin: self.center
	size_hint: 0.1, 1

	canvas.after:
		PopMatrix

<BottomPage@BoxLayout>:
	orientation: 'horizontal'
	canvas.before:
		Color:
			rgba: 0, 0, 0, 1
		Rectangle:
			pos: self.pos
			size: self.size
	canvas:
		Color:
			rgba: 1, 1, 1, 1
		Line:
			width: 1
			rectangle: (self.x, self.y, self.width, self.height)

<LineEntry@BoxLayout>:
	orientation: 'horizontal'
	#width: 100
	#size_hint: 1,0.01
	size_hint_y: 0.05
	height: '20sp'
	number: numberlabel
	value: valuelabel
	Label:
		size_hint_x: 0
		text_size: self.size	
		width: '20sp'
		id: numberlabel
		text: '>'
	Label:
		text_size: self.size	
		id: valuelabel
		halign: 'left'


<Calculator>:
	entryline: entryline2
	stackline8: stackline8
	stackline7: stackline7
	stackline6: stackline6
	stackline5: stackline5
	stackline4: stackline4
	stackline3: stackline3
	stackline2: stackline2
	stackline1: stackline1
	stackline0: stackline0
	messageline: messageline
	BoxLayout:
		width: root.width
		height: root.height
		orientation: 'vertical'
		LineEntry: 
			id: stackline8
		LineEntry: 
			id: stackline7
		LineEntry: 
			id: stackline6
		LineEntry: 
			id: stackline5
		LineEntry: 
			id: stackline4
		LineEntry: 
			id: stackline3
		LineEntry: 
			id: stackline2
		LineEntry: 
			id: stackline1
		LineEntry: 
			id: stackline0

		TextInput:
			size_hint: 1, 0.05
			id: entryline2
			multiline: False
			keyboard_suggestions: False

		PageLayout:
			#size_hint: 1, 0.6
			BottomPage:
				VertiLabel:
					text: "Basic"
				ButtonPage:

					size_hint: 0.9, 1
					CalcButton:
						text: "7"
					CalcButton:
						text: "8"
					CalcButton:
						text: "9"
					CalcButtonOp:
						text: "/"
					CalcButtonOp:
						text: "*"
					CalcButton:
						text: "4"
					CalcButton:
						text: "5"
					CalcButton:
						text: "6"
					CalcButtonOp:
						text: "+"
					CalcButtonOp:
						text: "-"
					CalcButton:
						text: "1"
					CalcButton:
						text: "2"
					CalcButton:
						text: "3"
					CalcButtonOp:
						text: "^"
					CalcButtonOp:
						text: "%"
					CalcButton:
						text: "0"
					CalcButton:
						text: "00"
					CalcButton:
						text: "."
					CalcButtonOp:
						text: "sqrt"
					CalcButtonSpecial:
						text: "clear"
					CalcButtonSpecial:
						text: "!"
					CalcButtonSpecial:
						text: "enter"
					CalcButtonSpecial:
						text: "drop"
					CalcButtonSpecial:
						text: "space"
			BottomPage:
				VertiLabel:
					text: "Programming"
				ButtonPage:
					CalcButtonSpecial:
						text: "="
					CalcButtonSpecial:
						text: "["
					CalcButtonSpecial:
						text: "]"
					CalcButtonSpecial:
						text: "<"
					CalcButtonSpecial:
						text: ">"
					CalcButtonSpecial:
						text: ">="
					CalcButtonSpecial:
						text: "<="
					CalcButtonSpecial:
						text: "=="
					CalcButtonSpecial:
						text: "not"
					CalcButtonSpecial:
						text: "drops"
					CalcButtonSpecial:
						text: "if"
					CalcButtonSpecial:
						text: "ifelse"
					CalcButtonSpecial:
						text: "while"
					CalcButtonSpecial:
						text: "break"
					CalcButtonSpecial:
						text: "size"
					CalcButtonSpecial:
						text: "null"
					CalcButtonSpecial:
						text: "isnull"
					CalcButtonSpecial:
						text: "roll"
					CalcButtonSpecial:
						text: "pick"
					CalcButtonSpecial:
						text: "tuck"
					CalcButtonSpecial:
						text: "over"
					CalcButtonSpecial:
						text: "rot"
					CalcButtonSpecial:
						text: "dup"
					CalcButtonSpecial:
						text: "clear"
					CalcButtonSpecial:
						text: "all"
					CalcButtonSpecial:
						text: "!"
					CalcButtonSpecial:
						text: "space"
			BottomPage:
				VertiLabel:
					text: "Display"
				ButtonPage:
					CalcButtonSpecial:
						text: "int"
					CalcButtonSpecial:
						text: "float"
					CalcButtonSpecial:
						text: "bin"
					CalcButtonSpecial:
						text: "hex"
					CalcButtonSpecial:
						text: "oct"
					CalcButtonSpecial:
						text: "dec"
					CalcButtonSpecial:
						text: "ascii"
			BottomPage:
				VertiLabel:
					text: "Debug"
				ButtonPage:
					CalcButtonSpecial:
						text: "step"
					CalcButtonSpecial:
						text: "run"
					CalcButtonSpecial:
						text: "@"

		LineEntry: 
			id: messageline
